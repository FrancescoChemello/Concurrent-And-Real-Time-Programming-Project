# CONCURRENT AND REAL TIME PROGRAMMING - REPOSITORY TEMPLATE #
Concurrent and Real Time Project - 2024/25 

## Overview ##
This project implements real-time frame acquisition from a webcam in Linux while ensuring that variations in disk write speed do not affect the frame capture rate. The solution achieves this by decoupling the acquisition task from the storage task using separate processes and message queues.

**Note:** *The program does not guarantee capturing every single frame generated by the webcam but ensures that frames are acquired at a stable frequency, independent of disk write performance.*

This project was developed as part of the [Concurrent and Real Time Programming](https://stem.elearning.unipd.it/course/view.php?id=10492) course.

*Concurrent and Real Time Programming* is a course of the [Master Degree in Computer Engineering](https://degrees.dei.unipd.it/master-degrees/computer-engineering/) of the  [Department of Information Engineering](https://www.dei.unipd.it/en/), [University of Padua](https://www.unipd.it/en/), Italy.

## Exercise ##
**Exercise 01:** *Acquisition of frames from a Webcam in Linux and storage of the frames on disk. Variation in disk write shall not affect the frequency at which frames are acquired. Therefore the task carrying out frame write on disk shall be decoupled from the task supervising frames acquisition. Task implementation can be via Linux processes or Threads.*

## Dependencies ##
Ensure that the following packages are installed before running the program:

* `libv4l-dev` (for V4L2 support).
* `gcc` (for compilation).
* `make` (for building the project).

### Installation on Debian-based systems:
```sh
sudo apt update && sudo apt install libv4l-dev gcc make 
```

## Camera settings ##

The following settings have been used for webcam configuration:
```sh
ioctl: VIDIOC_ENUM_FMT
        Type: Video Capture

        [0]: 'MJPG' (Motion-JPEG, compressed)
        [1]: 'YUYV' (YUYV 4:2:2)
```

Supported Resolutions:

```sh
Streaming Parameters Video Capture:
        Capabilities     : timeperframe
        Frames per second: 30.000 (30/1)
        Read buffers     : 0
```

## Repository Structure ##
The repository is organised as follows:
* code: contains the main source code for the project.
    * frame: stores the frames captured by the program..
    * Makefile: compilation instructions.
* README: project documentation. 

## How to run the program ##

### Compilation ###
To compile the program, run:

```sh
make
```

### Execution ###
Run the program with the following syntax:

```sh
./2121346_ex01 <format> <width> <height> <frame_rate> <time>
``` 
where:
   * `<format>` is the format (MJPG or YUYV).
   * `<width>` is the width of the frame.
   * `<height>` is the height of the frame.
   * `<frame_rate>` is the frame rate.
   * `<time>` is the acquisition time in seconds.

Example: 
```sh
./2121346 MJPG 640 360 30 5
```
This command captures frames in **MJPG** format at a resolution of **640x360**, with a frame rate of **30 FPS**, for **5** seconds.

**Note:** *The program does not necessarily capture every frame produced by the webcam but follows a steady acquisition rate. The number of frames stored may vary depending on system performance and scheduling.*

### License ###

All the contents of this repository are shared using the [Creative Commons Attribution-ShareAlike 4.0 International License](http://creativecommons.org/licenses/by-sa/4.0/).

![CC logo](https://i.creativecommons.org/l/by-sa/4.0/88x31.png)
